/**
 * cavy.js(http://trifort.jp/library/cavy)
 * Copyright (c) 2013 TriFort.inc
 * version 1.0.0
 * MIT License
 * 
 * Matrix2D
 * Visit http://createjs.com/ for documentation, updates and examples.
 * Copyright (c) 2010 gskinner.com, inc.
 */
!function(a){"use strict";a.cavy=a.cavy||{},cavy.userAgent=navigator.userAgent;var b=-1!==cavy.userAgent.search(/OS 6|OS 5|OS 4/)||-1!==cavy.userAgent.search(/Android/);a.requestAnimationFrame=function(a){return b?a.setTimeout:a.webkitRequestAnimationFrame||a.requestAnimationFrame||a.setTimeout}(a),a.cancelAnimationFrame=function(a){return b?a.clearTimeout:a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame||a.clearTimeout}(a),cavy.retina=!1,cavy.pixelSnap=!1,cavy.strict=!0,cavy.frameRate=60,cavy.maxSkip=60,cavy.deviceRatio=1,cavy.bugs={background:["F-06E","L-05E","SC-04E"],lag:["Galaxy Nexus","F-02E","SH-06E","F-06E","SH-04E","SO-02E","SC-01F","SC-02F","N-05E","AT503"]},cavy.outOfRendering=!0,cavy.doubleBuffering=!1,cavy.useFilter=!1,cavy.backgroundColor="rgba(255,255,255,0.01)",cavy.isBuggyDevice=function(a){var b=cavy.bugs[a];if(!b)return!1;for(var c=b.length;c--;)if(-1!==cavy.userAgent.search(b[c]))return!0;return!1},cavy.isRetina=function(){return 1!==a.devicePixelRatio?!0:!1},cavy.expand=function(){for(var b in this)a[b]=this[b]}}(window),function(a){"use strict";a.cavy=a.cavy||{};var b={clone:function(a){var c;return a.constructor?(c=a.constructor,c.prototype=a.constructor.prototype,c=new c):c={},c=b.extend(c,a)},extend:function(a,b,c){for(var d in b)c&&(this.isPlainObject(b[d])||this.isArray(b[d]))?(this.isPlainObject(b[d])&&!this.isPlainObject(a[d])&&(a[d]={}),this.isArray(b[d])&&!this.isArray(a[d])&&(a[d]=[],extend(a[d],b[d],c))):void 0!==b[d]&&(a[d]=b[d]);return a},isPlainObject:function(a){return a&&"object"==typeof a&&a!==a.window&&Object.getPrototypeOf(a)===Object.prototype},isArray:function(a){return a instanceof Array}};cavy.Util=b}(window),function(a){"use strict";a.cavy=a.cavy||{};var b=function(){this.__store__={}};b.prototype={constructor:b,addEventListener:function(a,b){return this.on(a,b)},on:function(a,b){var c=this.__store__[a]||[];return c.push(b),this.__store__[a]=c,this},removeEventListener:function(a,b){return this.off(a,b)},off:function(a,b){if(a)if("function"==typeof b){var c=this.__store__[a];if(c){var d=c.indexOf(b);-1!==d&&(c.splice(d,1),this.__store__[a]=c)}}else delete this.__store__[a];else this.__store__={};return this},hasEvent:function(a){return this.__store__[a]?!0:!1},dispatchEvent:function(a,b,c){return this.trigger(a,b,c)},trigger:function(a,b,c){var d=this.__store__[a]||null;if(d){c=c||this;for(var e=Array.prototype.slice.call(arguments,1),f=d.slice(),g=0,h=f.length;h>g;g++)f[g].apply(c,e);f=null}return this}},cavy.EventDispatcher=b}(window),function(a){"use strict";a.cavy=a.cavy||{};var b=function(b,c,d){cavy.EventDispatcher.call(this),this.data=b,this.keys=[],this.result=[],this.index=0,this.loadedCount=0,this.length=0,this.leaveCount=0,"function"==typeof c?this.callback=c:"function"==typeof d&&(this.callback=d),this.maxConnection="number"==typeof c?d:"number"==typeof d?d:5;var e=this;this.loadedHandler=function(a){e.loaded(a.target)},this.errorHandler=function(a){e._error(a)},a.setTimeout(function(){e.init()},0)},c=b.prototype=Object.create(cavy.EventDispatcher.prototype);c.constructor=b,c.init=function(){var a=this.maxConnection;this.keys=Object.keys(this.data),this.length=this.keys.length,a>this.length&&(a=this.length),this.leaveCount=this.length-a,this.index=a;for(var b=0;a>b;b++)this.load(b)},c.loaded=function(a){++this.loadedCount,this.dispatchEvent("step",a),a.removeEventListener("load",this.loadedHandler),a.removeEventListener("error",this.errorHandler),this.result[a.id]=a,this.loadedCount===this.length?(this.dispatchEvent("complete",this.result),"function"==typeof this.callback&&this.callback(this.result)):0!==this.leaveCount&&(this.leaveCount--,this.load(this.index++))},c.load=function(a){var b=new Image;b.id=this.keys[a],b.addEventListener("load",this.loadedHandler),b.addEventListener("error",this.errorHandler),b.src=this.data[this.keys[a]],b.complete&&this.loaded(b)},c._error=function(a){return this.trigger("error",a),this},c.get=function(a){return this.result[a]},c.error=function(a){var b=function(){this.removeEventListener("error",b),a.call(this,arguments)};return this.addEventListener("error",b),this},c.complete=function(a){var b=function(){this.removeEventListener("complete",b),a.call(this,arguments)};return this.addEventListener("complete",b),this},c.destroy=function(){delete this.result,delete this.data,this.result=[]},cavy.Preload=b}(window),function(a){"use strict";a.cavy=a.cavy||{};var b=function(a,b,c,d,e,f,g){this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this.opacity=1,this.initialize(a,b,c,d,e,f,g)};b.identity=null,b.DEG_TO_RAD=Math.PI/180,b.prototype={constructor:b,a:1,b:0,c:0,d:1,e:0,f:0,opacity:1,initialize:function(a,b,c,d,e,f,g){return null!=a&&(this.a=a),this.b=b||0,this.c=c||0,null!=d&&(this.d=d),this.e=e||0,this.f=f||0,this.opacity=isNaN(g)?1:g,this},prepend:function(a,b,c,d,e,f){var g=this.e;if(1!==a||0!==b||0!==c||1!==d){var h=this.a,i=this.c;this.a=h*a+this.b*c,this.b=h*b+this.b*d,this.c=i*a+this.d*c,this.d=i*b+this.d*d}return this.e=g*a+this.f*c+e,this.f=g*b+this.f*d+f,this},append:function(a,b,c,d,e,f){var g=this.a,h=this.b,i=this.c,j=this.d;return this.a=a*g+b*i,this.b=a*h+b*j,this.c=c*g+d*i,this.d=c*h+d*j,this.e=e*g+f*i+this.e,this.f=e*h+f*j+this.f,this},prependMatrix:function(a){return this.prepend(a.a,a.b,a.c,a.d,a.e,a.f),this},appendMatrix:function(a){return this.append(a.a,a.b,a.c,a.d,a.e,a.f),this},prependTransform:function(a,c,d,e,f,g,h,i,j){var k=1,l=0;if(f%360){var m=f*b.DEG_TO_RAD;k=Math.cos(m),l=Math.sin(m)}return(i||j)&&(this.e-=i,this.f-=j),g||h?(g*=b.DEG_TO_RAD,h*=b.DEG_TO_RAD,this.prepend(k*d,l*d,-l*e,k*e,0,0),this.prepend(Math.cos(h),Math.sin(h),-Math.sin(g),Math.cos(g),a,c)):this.prepend(k*d,l*d,-l*e,k*e,a,c),this},appendTransform:function(a,c,d,e,f,g,h,i,j){var k=1,l=0;if(f%360){var m=f*b.DEG_TO_RAD;k=Math.cos(m),l=Math.sin(m)}return g||h?(g*=b.DEG_TO_RAD,h*=b.DEG_TO_RAD,this.append(Math.cos(h),Math.sin(h),-Math.sin(g),Math.cos(g),a,c),this.append(k*d,l*d,-l*e,k*e,0,0)):this.append(k*d,l*d,-l*e,k*e,a,c),(i||j)&&(this.e-=i*this.a+j*this.c,this.f-=i*this.b+j*this.d),this},rotate:function(a){a*=b.DEG_TO_RAD;var c=Math.cos(a),d=Math.sin(a),e=this.a,f=this.c,g=this.e;return this.a=e*c-this.b*d,this.b=e*d+this.b*c,this.c=f*c-this.d*d,this.d=f*d+this.d*c,this.e=g*c-this.f*d,this.f=g*d+this.f*c,this},skew:function(a,c){return a*=b.DEG_TO_RAD,c*=b.DEG_TO_RAD,this.append(Math.cos(c),Math.sin(c),-Math.sin(a),Math.cos(a),0,0),this},scale:function(a,b){return this.a*=a,this.d*=b,this.c*=a,this.b*=b,this.e*=a,this.f*=b,this},translate:function(a,b){return this.e+=a,this.f+=b,this},identity:function(){return this.a=this.d=this.opacity=1,this.b=this.c=this.e=this.f=0,this},invert:function(){var a=this.a,b=this.b,c=this.c,d=this.d,e=this.e,f=a*d-b*c;return this.a=d/f,this.b=-b/f,this.c=-c/f,this.d=a/f,this.e=(c*this.f-d*e)/f,this.f=-(a*this.f-b*e)/f,this},isIdentity:function(){return 0===this.e&&0===this.f&&1===this.a&&0===this.b&&0===this.c&&1===this.d},decompose:function(a){null==a&&(a={}),a.x=this.e,a.y=this.f,a.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),a.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var c=Math.atan2(-this.c,this.d),d=Math.atan2(this.b,this.a);return c==d?(a.rotation=d/b.DEG_TO_RAD,this.a<0&&this.d>=0&&(a.rotation+=a.rotation<=0?180:-180),a.skewX=a.skewY=0):(a.skewX=c/b.DEG_TO_RAD,a.skewY=d/b.DEG_TO_RAD),a},clone:function(){return new b(this.a,this.b,this.c,this.d,this.e,this.f,this.opacity)},toString:function(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"},toString3D:function(){return"matrix3d("+this.a+","+this.b+",0,0,"+this.c+","+this.d+",0,0,0,0,1,0,"+this.e+","+this.f+",0,1)"}},b.identity=new b(1,0,0,1,0,0),cavy.Matrix2D=b}(window),function(a){"use strict";a.cavy=a.cavy||{};var b=!1,c=[],d=0,e=null,f={update:function(){var b=Date.now(),g=null,h=c.slice(),i=h.length;for(d=b;i--;)g=c[i],g&&b-g.time>=g.delay&&(isNaN(g.count)||(--g.count,0===g.count&&c.splice(i,1),g.cacheCount-=g.count),g.callback(b-g.timeStamp,b-g.time,g.count),g.time=b);e=a.requestAnimationFrame(f.update)},repeat:function(a,b,e){var h=new g(d,a,b,e);return c.push(h),f.play(),h},delay:function(a,b){var e=new g(d,a,Math.floor(b),1);return c.push(e),f.play(),e},play:function(){return b||(b=!0,f.update()),f},stop:function(d){var f=c.indexOf(d);return-1!==f&&c.splice(f,1),0===c.length&&(a.cancelAnimationFrame(e),b=!1),this},stopAll:function(){return e&&(a.cancelAnimationFrame(e),b=!1),f}};cavy.Timer=f;var g=function(a,b,c,d){this.time=a||0,this.timeStamp=a||Date.now(),this.callback=b||function(){},this.delay=c||0,this.count=d||0/0,this.cacheCount=d||0};g.prototype={stop:function(){f.stop(this)},play:function(){c.push(this)}},cavy.TimerObject=g}(window),function(a){"use strict";a.cavy=a.cavy||{};var b=function(a){this.queue=a?new Array(a):[],this.labels={},this.frame=0,this.timer=null,this.time=0,this.passedTime=0;var b=this;this._enterframeHandler=function(){b._tick(),b.frame++},cavy.EventDispatcher.apply(this)},c=b.prototype=Object.create(cavy.EventDispatcher.prototype);c.constructor=b,c.SECOND=1e3,c.add=function(b,c){if("string"==typeof b){var d=this.labels[b];if(isNaN(d))return a.console.error("Not found label ["+b+"]"),void 0;b=d}return b=Math.round(b/(this.SECOND/cavy.frameRate)),"object"==typeof this.queue[b]?this.queue[b].push(c):this.queue[b]=[c],this},c.addLabel=function(a,b,c){this.labels[b]=a,c&&this.add(a,c)},c.removeLabel=function(a){delete this.labels[a]},c.remove=function(a,b){var c=this.queue[a];if(c){var d=c.indexOf(b);-1!==d&&c.splice(d,1)}return this},c.play=function(){return this.stop(),this.time=Date.now(),this.timer=cavy.Timer.repeat(this._enterframeHandler),this},c.stop=function(){return cavy.Timer.stop(this.timer),this},c.goToAndPlay=function(b){if("string"==typeof b){var c=this.labels[b];if(isNaN(c))return a.console.error("Not found label ["+b+"]"),void 0;b=c}this.frame=Math.round(b/(this.SECOND/cavy.frameRate)),this.passedTime=Math.floor(this.frame*(this.SECOND/cavy.frameRate)),this._tick(),this.play()},c.goToAndStop=function(c){if("string"==typeof c){var d=this.labels[c];if(isNaN(d))return a.console.error("Not found label ["+c+"]"),void 0;c=d}this.frame=Math.round(c/(b.SECOND/cavy.Tween.frameRate)),this.passedTime=Math.floor(this.frame*(this.SECOND/cavy.frameRate)),this._tick(),this.stop()},c.reset=function(){return this.frame=0,this},c._tick=function(){var a=Date.now(),b=a-this.time;this.passedTime+=b,this.time=a;var c=Math.floor(this.passedTime/(1e3/cavy.frameRate));c-this.frame>cavy.maxSkip&&(c=this.frame+cavy.maxSkip);var d=[this.frame,c];this.frame=c;for(var e=d[0];e<=d[1]&&this.frame===c;e++){var f=this.queue[e];if(f&&0!==f.length)for(var g=f.length;g--;)f[g].apply(this,[this.frame])}return this.frame>this.queue.length?(this.stop(),this.dispatchEvent("complete"),void 0):void 0},cavy.Timeline=b}(window),function(a){"use strict";a.cavy=a.cavy||{};var b=function(){var a=this.create;return a.create=this.create,a.remove=this.remove,a};b.prototype={constructor:b,create:function(a,b){return new d(a,b||!1)},remove:function(a){a.destroy()}},b.duration=1e3,b.easing="easeOutQuad";var c={linear:function(a,b,c,d){return c*a/d+b},easeInQuad:function(a,b,c,d){return c*(a/=d)*a+b},easeOutQuad:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOutQuad:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},easeInCubic:function(a,b,c,d){return c*(a/=d)*a*a+b},easeOutCubic:function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},easeInOutCubic:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b},easeInQuart:function(a,b,c,d){return c*(a/=d)*a*a*a+b},easeOutQuart:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},easeInOutQuart:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b},easeInQuint:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},easeOutQuint:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},easeInOutQuint:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b},easeInSine:function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},easeOutSine:function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},easeInOutSine:function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},easeInExpo:function(a,b,c,d){return 0==a?b:c*Math.pow(2,10*(a/d-1))+b},easeOutExpo:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},easeInOutExpo:function(a,b,c,d){return 0==a?b:a==d?b+c:(a/=d/2)<1?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b},easeInCirc:function(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b},easeOutCirc:function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},easeInOutCirc:function(a,b,c,d){return(a/=d/2)<1?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b},easeInElastic:function(a,b,c,d){var e=1.70158,f=0,g=c;if(0==a)return b;if(1==(a/=d))return b+c;if(f||(f=.3*d),g<Math.abs(c)){g=c;var e=f/4}else var e=f/(2*Math.PI)*Math.asin(c/g);return-(g*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-e)*Math.PI/f))+b},easeOutElastic:function(a,b,c,d){var e=1.70158,f=0,g=c;if(0==a)return b;if(1==(a/=d))return b+c;if(f||(f=.3*d),g<Math.abs(c)){g=c;var e=f/4}else var e=f/(2*Math.PI)*Math.asin(c/g);return g*Math.pow(2,-10*a)*Math.sin(2*(a*d-e)*Math.PI/f)+c+b},easeInOutElastic:function(a,b,c,d){var e=1.70158,f=0,g=c;if(0==a)return b;if(2==(a/=d/2))return b+c;if(f||(f=.3*d*1.5),g<Math.abs(c)){g=c;var e=f/4}else var e=f/(2*Math.PI)*Math.asin(c/g);return 1>a?-.5*g*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-e)*Math.PI/f)+b:g*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*d-e)*Math.PI/f)*.5+c+b},easeInBack:function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*(a/=d)*a*((e+1)*a-e)+b},easeOutBack:function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},easeInOutBack:function(a,b,c,d,e){return void 0==e&&(e=1.70158),(a/=d/2)<1?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},easeInBounce:function(a,c,d,e){return d-b.Easing.easeOutBounce(e-a,0,d,e)+c},easeOutBounce:function(a,b,c,d){return(a/=d)<1/2.75?7.5625*c*a*a+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},easeInOutBounce:function(a,c,d,e){return e/2>a?.5*b.Easing.easeInBounce(2*a,0,d,e)+c:.5*b.Easing.easeOutBounce(2*a-e,0,d,e)+.5*d+c}};b.Easing=c;var d=function(a,b){cavy.EventDispatcher.call(this),this.sprite=a,this.autoRelease=b,this.__attach__=[],this.index=0,this.isPlaying=!1,this.isRepeat=!1,this.reverse=!1,this.isReset=!1,this.time=0,this.stepCallback=null;var c=this;this._loopHandler=function(){c.update()}},e=d.prototype=Object.create(cavy.EventDispatcher.prototype);e.constructor=d,e.to=function(a){var b=Array.prototype.slice.call(arguments);a=b.shift();var c=new f(a,b);return this.__attach__.push(c),this.isPlaying||(c.initialize(this.sprite),this.play()),this},e.set=function(a){var b=new g(a);return this.__attach__.push(b),this.isPlaying||(b.initialize(this.sprite),this.play()),this},e.wait=function(a){var b=new i(a);return 0!==b.frame&&(this.__attach__.push(b),this.isPlaying||(b.initialize(),this.play())),this},e.call=function(a){var b=new h(a);return this.__attach__.push(b),this.isPlaying||(b.initialize(),this.play()),this},e.complete=function(a){var b=function(){this.removeEventListener("complete",b),a.call(this,arguments)};return this.addEventListener("complete",b),this},e.repeat=function(a,b){return this.isRepeat=!0,"number"==typeof a?(this.isReset=!1,this.limit=2*a,this):(this.isReset=a||!1,"number"==typeof b&&(this.limit=b,this.isReset||(this.limit*=2)),this)},e._doAttach=function(){this.reverse?--this.index:++this.index;var a=this.__attach__[this.index];a.initialize(this.sprite,this.reverse,this.isReset),this.time=Date.now()},e._hasAttach=function(){var a=this.__attach__.length;if(0===a)return!1;if(this.reverse){if(0!==this.index)return!0}else if(this.index!==a-1)return!0;return!1},e.play=function(){return this.isPlaying||(this.stop(),this.time=Date.now(),this.isPlaying=!0,this.timer=cavy.Timer.repeat(this._loopHandler)),this},e.stop=function(){return this.isPlaying=!1,this.timer&&this.timer.stop(),this},e.reset=function(){return this.stop(),this.index=0,this.isReset=!1,this.isRepeat=!1,this.__attach__=[],this},e.update=function(){if(!this.sprite||!this.sprite.parent)return this.stop(),void 0;var a=this.__attach__[this.index];if(cavy.strict){var c=Date.now(),d=(c-this.time)/a.time*a.frame;d-a.count>cavy.maxSkip&&(d=a.count+cavy.maxSkip),a.count=Math.min(~~d,a.frame)}var e=b.Easing[a.easing];if(a.count===a.frame){for(var f in a.end){var g=a.start[f],h=a.end[f];this.sprite[f]=e(a.count,g,h-g,a.frame-1)}if(this._hasAttach())this._doAttach();else{if(!this.isRepeat)return this.stop(),this.dispatchEvent("complete",this,this.sprite),this.autoRelease&&this.destroy(),void 0;if(!isNaN(this.limit)&&(--this.limit,this.limit<=0))return this.stop(),this.dispatchEvent("complete",this,this.sprite),this.limit=null,void 0;this.isReset?this.index=-1:this.reverse?(this.reverse=!1,this.index=-1):(this.reverse=!0,this.index=this.__attach__.length),this._doAttach()}}else if("tween"===a.QUEUE_TYPE){for(var f in a.end){var g=a.start[f],h=a.end[f];this.sprite[f]=e(a.count,g,h-g,a.frame-1)}cavy.strict&&a.count++}else"wait"===a.QUEUE_TYPE&&cavy.strict&&a.count++;a.count<=a.frame&&this.stepCallback&&this.stepCallback.call(this)},e.destroy=function(){this.stop(),this.stepCallback=null,this.removeEventListener(),this.__attach__=[],this.sprite=null},e.step=function(a){return this.stepCallback=a,this};var f=function(a,c){if(this.setting={duration:b.duration,easing:b.easing},this.start=null,this.end=a,c)for(var d=c.length;d--;){var e=c[d];if("object"==typeof e)for(var f in e)this.setting[f]=e[f];else"string"==typeof e?this.setting.easing=e:"number"==typeof e&&(this.setting.duration=e)}this.SECOND=1e3,this.time=this.setting.duration,this.easing=this.setting.easing,this.count=0,this.frame=Math.round(this.time/(this.SECOND/cavy.frameRate))};f.prototype={constructor:f,QUEUE_TYPE:"tween",initialize:function(a,b,c){if(this.count=0,b){var d=this.start;this.start=this.end,this.end=d}else if(this.start&&!c){var d=this.start;this.start=this.end,this.end=d}else this.start=this.extend(this.end,a),this.checkRelative(this.end)},checkRelative:function(a){for(var b in a){var c=a[b];"string"==typeof c&&-1!==c.search(/\+=|-=/)&&(c=parseFloat(c.replace(/=/,"")),a[b]=c+this.start[b])}},extend:function(a,b){var c={};for(var d in a)c[d]=b[d];return c}};var g=function(a){this.param=a,this.count=this.frame=0};g.prototype={constructor:g,QUEUE_TYPE:"param",initialize:function(a){this.count=this.frame=0;for(var b in this.param)a[b]=this.param[b]}};var h=function(a){this.callback=a,this.count=this.frame=0};h.prototype={constructor:h,QUEUE_TYPE:"call",initialize:function(a){this.count=this.frame=0,this.callback.call(a)}};var i=function(a){this.time=a,this.count=0,this.SECOND=1e3,this.frame=Math.round(this.time/(this.SECOND/cavy.frameRate))};i.prototype={constructor:i,QUEUE_TYPE:"wait",initialize:function(){this.count=0,this.frame=Math.round(this.time/(this.SECOND/cavy.frameRate))}},cavy.Tween=new b,cavy.TweenEasing=c,cavy.TweenObject=d}(window),function(a){"use strict";a.cavy=a.cavy||{};var b=function(a){this.scenes=[],this.scenesData={},this.index=-1;var b=this;return this.addHandler=function(a,c){b.add(a,c)},this.removeHandler=function(a){b.remove(a)},this.goHandler=function(a,c){b.go(a,c)},this.selectHandler=function(a,c){b.select(a,c)},this.nextHandler=function(a){b.next(a)},this.prevHandler=function(a){b.prev(a)},this.destroyHandler=function(){b.destroy()},this._initialize(a),{add:this.addHandler,remove:this.removeHandler,go:this.goHandler,select:this.selectHandler,next:this.nextHandler,prev:this.prevHandler,destroy:this.destroyHandler}};b.prototype={constructor:b,_initialize:function(a){if(a)for(var b in a)this.add(b,a[b])},add:function(a,b){this.scenes.push(a),this.scenesData[a]=b},remove:function(a){delete this.scenes[a]},go:function(b,c){if("string"==typeof b){var d=this.scenesData[b];d?(this.index=this.scenes.indexOf(b),d(c,this.index)):a.error("Not found: Scene ["+b+"]")}else this.select(b,c)},select:function(a,b){var c=this.scenes[a];c&&(this.index=a,this.scenesData[c](b,a))},next:function(a){var b=this.index+1,c=this.scenes[b];c&&(this.index=b,this.scenesData[c](a,b))},prev:function(a){var b=this.index-1,c=this.scenes[b];c&&(this.index=b,this.scenesData[c](a,b))},destroy:function(){this.scenes=[],this.scenesData={},this.index=-1}},cavy.Scene=b}(window),function(a){"use strict";a.cavy=a.cavy||{};var b=function(a,b){if(cavy.EventDispatcher.call(this),this.source=a,"string"==typeof this.source){var c=new Image;c.src=this.source,this.source=c}this.parent=null,this.width=this.source?this.source.width:0,this.height=this.source?this.source.height:0,this.fitImage=!1,this.fitType="normal",this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.positionX=0,this.positionY=0,this.scaleX=1,this.scaleY=1,this.originX=0,this.originY=0,this.opacity=1,this.rotation=0,this.skewX=0,this.skewY=0,this.visible=!0,this.filter=null,this.children=[],this.matrix=new cavy.Matrix2D,this.mask=null,this.interactive=!0,this.cache=null,this.imageCache=null,this._visible=!0,this._pool={},this._param=new d,b&&"object"==typeof b&&this.set(b)},c=b.prototype=Object.create(cavy.EventDispatcher.prototype);c.constructor=b,c.set=function(a){for(var b in a)this[b]=a[b];return this},c.addTo=function(a){return a.addChild(this),this},c.removeFrom=function(a){return a.removeChild(this),this},c.addChild=function(a){return a.parent=this,this.children.push(a),this},c.addChildAt=function(b,c){return b.parent&&b.parent.removeChild(b),c>this.children.length?(a.console.error("INDEX_ERROR"),this):(b.parent=this,this.children.splice(c,0,b),this)},c.replaceChild=function(b,c){return b.parent&&b.parent.removeChild(b),c>this.children.length?(a.console.error("INDEX_ERROR"),this):(b.parent=this,this.children[c]=b,this)},c.swapChild=function(a,b){var c=this.children.indexOf(a),d=this.children.indexOf(b);return this.swapChildAt(c,d),this},c.swapChildAt=function(a,b){if(-1!==a&&-1!==b){var c=this.children[a];this.children[a]=b,this.children[b]=c}return this},c.setIndex=function(a){return this.parent?(this.parent.setChildIndex(this,a),this):this},c.setChildIndex=function(b,c){if(c>this.children.length)return a.console.error("INDEX_ERROR"),this;var d=this.children.indexOf(b);return-1!==d&&(this.children.splice(d,1),this.children.splice(c,0,b)),this},c.removeChild=function(a){var b=this.children.indexOf(a);return-1!==b&&this.children.splice(b,1),a.parent=null,this},c.removeChildAt=function(a){return this.children.splice(a,1),this},c.removeAllChildren=function(){for(var a=this.children.length;a--;)this.removeChild(this.children[a]);return this.children=[],this},c.adjustSource=function(a){"width"===a?this.height=this.source.height*this.width/this.source.width:this.width=this.source.width*this.height/this.source.height},c.update=function(){return this._param.initialize(this),this.fitImage&&this.source&&(this._param.fitSource(this.source,this.fitType),"contain"===this.fitType&&(this.width=this._param.width,this.height=this._param.height)),this.matrix=this._param.matrix,this._param},c.getStage=function(){return this instanceof cavy.Stage?this:this.parent?this.parent.getStage():null},c.clone=function(a){var b=cavy.Util.clone(this);return a&&(b.x=b.y=b.skewX=b.skewY=b.rotation=0,b.scaleX=b.scaleY=b.opacity=1,b.matrix.initialize()),b},c.getBoundingRect=function(){this.update();var a=this.getBounds();return this.convertBoundaryRect(a)},c.getBounds=function(){var a=this.width,b=this.height,c=this.matrix,d={top:c.e,left:c.f,right:c.e+a,bottom:c.f+b,width:a,height:b};if(!this.parent)return d;var e=c,f=(new cavy.Matrix2D).translate(a,0).prependMatrix(c),g=(new cavy.Matrix2D).translate(0,b).prependMatrix(c),h=(new cavy.Matrix2D).translate(a,b).prependMatrix(c),i=[[e.e,e.f],[f.e,f.f],[g.e,g.f],[h.e,h.f]];return i},c.convertBoundaryRect=function(a){for(var b=a[0][0],c=a[0][0],d=a[0][1],e=a[0][1],f=a.length;f--;)b=Math.min(b,a[f][0]),c=Math.max(c,a[f][0]),d=Math.min(d,a[f][1]),e=Math.max(e,a[f][1]);return{left:b,right:c,top:d,bottom:e,width:c-b,height:e-d}},c.createCache=function(){var a=this.cache||document.createElement("canvas"),b=a.getContext("2d");if(this.cache=null,this.clearCanvas(b,a.width,a.height),a.width=this.width*cavy.deviceRatio,a.height=this.height*cavy.deviceRatio,0===a.width&&0===a.height)return this.cache=null,void 0;var c=this.clone(!0);c.parent=new cavy.Sprite;var d=c.getBoundingRect();b.scale(cavy.deviceRatio,cavy.deviceRatio),this._drawCache([c],b,d),this.cache=a},c.clearCanvas=function(a,b,c){for(var d=b+255>>8,e=c+255>>8;d--;)for(var f=0;e>f;f++)a.clearRect(d<<8,f<<8,256,256)},c._drawCache=function(a,b,c){if(a)for(var d=a.slice(),e=0,f=d.length;f>e;e++){var g=d[e];g.visible&&(b.save(),b.transform(1,0,0,1,-c.left*cavy.deviceRatio,-c.top*cavy.deviceRatio),g.draw(b),b.restore(),0===g.children.length||g.cache||this._drawCache(g.children,b,c))}},c.deleteCache=function(){if(this.imageCache=null,this.cache){var a=this.cache.getContext("2d");this.clearCanvas(a,this.cache.width,this.cache.height)}this.cache=null},c.updateContext=function(a){var b,c=this.matrix;return this.mask?b=this.mask:this.parent&&this.parent.mask&&(b=this.parent.mask),b&&(b.draw(a,!0),a.clip()),this.filter&&(a.globalCompositeOperation=this.filter),a.globalAlpha=c.opacity,a.transform(c.a,c.b,c.c,c.d,c.e,c.f),!0},c.data=function(a,b){if("undefined"==typeof a)return this._pool;if("string"==typeof a){if("undefined"==typeof b)return this._pool[a];this._pool[a]=b}else for(var c in a)this._pool[c]=a[c]},c.clearData=function(a){a?delete this._pool[a]:this._pool={}};var d=function(){this.x=0,this.y=0,this.width=0,this.height=0,this.sx=0,this.sy=0,this.innerWidth=0,this.innerHeight=0,this.visible=!1,this.opacity=1,this.matrix=null};d.prototype={initialize:function(a){this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this.innerWidth=a.width,this.innerHeight=a.height,this.visible=a.visible,this.sx=a.offsetX*this.width+a.positionX,this.sy=a.offsetY*this.height+a.positionY,this.matrix=a.matrix,cavy.pixelSnap&&this.pixelSnap(),this.setMatrix(a)},pixelSnap:function(){this.x=.5+this.x|0,this.y=.5+this.y|0,this.sx=.5+this.sx|0,this.sy=.5+this.sy|0},fitSource:function(a,b){switch(this.innerWidth=a.width,this.innerHeight=a.height,b){case"height":this.width=this.innerWidth*(this.height/this.innerHeight);break;case"width":this.height=this.innerHeight*(this.width/this.innerWidth);break;case"cover":case"contain":var c=this.getResizeData(this.innerWidth,this.innerHeight,"cover"===b);this.width=c.width,this.height=c.height}},setMatrix:function(a){var b=this.matrix;b.identity();var c=a.opacity;a.parent&&(b.appendMatrix(a.parent.matrix),c*=a.parent.matrix.opacity),b.appendTransform(this.x,this.y,a.scaleX,a.scaleY,a.rotation,a.skewX,a.skewY,this.width*a.originX,this.height*a.originY),b.opacity=c},getResizeData:function(a,b,c){var d=this.width,e=this.height,f={width:a,height:b},g=d/a,h=e/b;return c?g>h?(f.width=d,f.height=f.height*g):(f.height=e,f.width=f.width*h):h>g?(f.width=d,f.height=f.height*g):(f.height=e,f.width=f.width*h),f}},cavy.DisplayObject=b}(window),function(a){"use strict";a.cavy=a.cavy||{};var b=function(a,b){cavy.DisplayObject.call(this,a,b)},c=b.prototype=Object.create(cavy.DisplayObject.prototype);c.constructor=b,c.hitTest=function(a,b){if(this.mask){var c=this.mask.getBoundingRect();return a>=c.left&&a<=c.right&&b>=c.top&&b<=c.bottom?!0:!1}var d=this.getBoundingRect();return a>=d.left&&a<=d.right&&b>=d.top&&b<=d.bottom?!0:!1},c.hitTestObject=function(a){var b=this.getBoundingRect(),c=a.getBoundingRect();return this.mask&&!detail&&(b=this.mask.getBoundingRect()),a.mask&&!detail&&(c=this.mask.getBoundingRect()),b.left<=c.right&&b.top<=c.bottom&&b.right>=c.left&&b.bottom>=c.top},cavy.InteractiveObject=b}(window),function(a){"use strict";a.cavy=a.cavy||{};var b=function(a,b,c,d,e){if(this.container=a,"string"==typeof this.container&&(this.container=document.getElementById(this.container)),null!==this.container){this.canvas=[],this.context=[],this.rendering=null,this.tick=null,this.interactive=d?!0:!1,this.strictEvent=e?!0:!1,this.bufferIndex=0;var f=this;this._loopHandler=function(a){f.update(a)},this._triggerHandler=function(a){f._triggerEvent(a)},this._initialize(b,c)}},c=b.prototype=Object.create(cavy.InteractiveObject.prototype),d=["touchstart","touchmove","touchend","gesturestart","gesturechange","gestureend","click"];c.constructor=b,c._initialize=function(b,c){var e=0,f=0;for(this.width=b||320,this.height=c||240,this.container.style.position="relative",this.container.style.overflow="hidden",this.container.style.webkitTapHighlightColor="rgba(0,0,0,0)",this.container.style.tapHighlightColor="rgba(0,0,0,0)",this.container.style.width=b+"px",this.container.style.height=c+"px",this.canvas[0]=document.createElement("canvas"),cavy.doubleBuffering&&(this.canvas[1]=document.createElement("canvas")),e=0,f=this.canvas.length;e<this.canvas.length;e++){var g=this.canvas[e],h=g.style;h.position="absolute",h.top=0,h.left=0,cavy.doubleBuffering&&(h.visibility="hidden"),this.context[e]=this.canvas[e].getContext("2d"),cavy.retina?(cavy.deviceRatio=a.webkitDevicePixelRatio||a.devicePixelRatio||1,h.width=this.width+"px",h.height=this.height+"px",this.width*=cavy.deviceRatio,this.height*=cavy.deviceRatio,g.width=this.width,g.height=this.height,this.context[e].scale(cavy.deviceRatio,cavy.deviceRatio)):(g.width=this.width,g.height=this.height),this.container.appendChild(this.canvas[e])}if(this.interactive)for(var e=0,f=d.length;f>e;e++)this.container.addEventListener(d[e],this._triggerHandler);cavy.InteractiveObject.call(this,this.canvas[0])},c.clear=function(){this.context[this.bufferIndex].clearRect(0,0,this.width+1,this.height+1)},c.startRender=function(a){this.stopRender(),this.tick=a,this.rendering=cavy.Timer.repeat(this._loopHandler)},c.stopRender=function(){this.rendering&&(this.rendering.stop(),this.rendering=null)},c.render=function(a){this.context[this.bufferIndex].save(),a.draw(this.context[this.bufferIndex]),this.context[this.bufferIndex].restore()},c.update=function(a){this.bufferIndex=cavy.doubleBuffering?1-this.bufferIndex:0,this.clear(),this.tick?this.tick(a||0):0,this._render(this.children),cavy.doubleBuffering&&(this.canvas[this.bufferIndex].style.visibility="visible",this.canvas[1-this.bufferIndex].style.visibility="hidden")},c.destroy=function(){var a=0,b=0;if(this.children=[],this.interactive)for(a=0,b=d.length;b>a;a++)this.container.removeEventListener(d[a],this._triggerHandler);for(this.stopRender(),a=0,b=0;b>a;a++)this.container.removeChild(this.canvas[a]);this.context=this.canvas=[],this.container=null},c._render=function(a){for(var b=0,c=a.slice(),d=c.length,e=cavy.outOfRendering,f=cavy.useFilter;d>b;b++){var g=c[b];if(g&&g.visible){if(!e){var h=g.getBoundingRect(),i=this.width/2,j=this.height/2;if(h.bottom<-j||h.right<-i||h.top>this.height+j||h.left>this.width+i){g._visible=!1;continue}g._visible=!0}if(f&&g.parent)for(var k=g.children.length;k--;)if(null!==g.children[k].filter){g.createCache();break}this.render(g),0===g.children.length||g.cache||this._render(g.children)}}},c._triggerEvent=function(a){var b=a.touches,c=a.changedTouches,d=b&&b[0]?b[0].pageX:a.pageX,e=b&&b[0]?b[0].pageY:a.pageY;!d&&c&&(d=c[0].pageX),!e&&a.changedTouches&&(e=c[0].pageY),d-=document.body.scrollLeft,e-=document.body.scrollTop;var f=this.canvas[this.bufferIndex].getBoundingClientRect();this._trigger(a,d-f.left,e-f.top,this.children),this.hasEvent(a.type)&&this.dispatchEvent(a.type,a)},c._trigger=function(a,b,c,d){for(var e=d.length,f=d.slice();e--;){var g=f[e];if(g&&g.visible&&g._visible&&g.interactive&&(0!==g.children.length&&this._trigger(a,b,c,g.children),g.hasEvent(a.type)&&g.hitTest(b,c,this.strictEvent)&&(g.dispatchEvent(a.type,a),a.returnValue===!1)))break}},cavy.Stage=b}(window),function(a){"use strict";a.cavy=a.cavy||{};var b=function(a,b){this.backgroundColor="transparent",this.borderWidth=null,this.borderColor="transparent",this.backgroundImage=null,this.backgroundRepeat=null,this.queue=[],cavy.InteractiveObject.call(this,a,b)
},c=b.prototype=Object.create(cavy.InteractiveObject.prototype);b.DEG_TO_RAD=Math.PI/180,c.constructor=b,c.drawPath=function(a,b,c,d){if(this.cache)return this.imageCache&&"data:,"!==this.imageCache.src?a.drawImage(this.imageCache,0,0,this.imageCache.width,this.imageCache.height):a.drawImage(this.cache,0,0,this.cache.width,this.cache.height),void 0;if(a.beginPath(),d&&a.translate(b.x,b.y),b&&c)if(this.backgroundImage){var e=a.createPattern(this.backgroundImage,this.backgroundRepeat);a.fillStyle=e}else a.fillStyle="object"==typeof this.backgroundColor?this.backgroundColor.draw(a,b,c):this.backgroundColor;for(var f=0,g=this.queue.length;g>f;f++){var h=this.queue[f];a[h[0]].apply(a,h[1])}a.lineWidth=this.borderWidth,a.strokeStyle=this.borderColor,a.stroke(),a.fill(),a.closePath(),d&&a.translate(-b.x,-b.y)},c.rect=function(a,b,c,d){this.queue.push(["rect",[a,b,c,d]])},c.fillRect=function(a,b,c,d){this.queue.push(["fillRect",[a,b,c,d]])},c.strokeRect=function(a,b,c,d){this.queue.push(["strokeRect",[a,b,c,d]])},c.clear=function(){this.queue=[]},c.clearRect=function(a,b,c,d){this.queue.push(["clearRect",[a,b,c,d]])},c.lineTo=function(a,b){this.queue.push(["lineTo",[a,b]])},c.arcTo=function(a,b,c,d,e){this.queue.push(["arcTo",[a,b,c,d,e]])},c.bezierCurveTo=function(a,b,c,d,e,f){this.queue.push(["bezierCurveTo",[a,b,c,d,e,f]])},c.moveTo=function(a,b){this.queue.push(["moveTo",[a,b]])},c.fan=function(a,c,d,e,f){this.moveTo(a,c),this.queue.push(["arc",[a,c,d,(e-90)*b.DEG_TO_RAD,(e-90+f)*b.DEG_TO_RAD,!1]])},c.arc=function(a,c,d,e,f,g){e*=b.DEG_TO_RAD,f*=b.DEG_TO_RAD,this.queue.push(["arc",[a,c,d,e,f,g]])},cavy.Graphic=b}(window),function(a){"use strict";a.cavy=a.cavy||{};var b=function(){};b.prototype.constructor=b,b.prototype.draw=function(){return"transparent"},cavy.BackgroundColor=b}(window),function(a){"use strict";a.cavy=a.cavy||{};var b=function(a,b){this.x=0,this.y=0,this.width=a||null,this.height=b||null,this.steps=[]},c=b.prototype=Object.create(cavy.BackgroundColor.prototype);c.constructor=b,c.addStep=function(a,b){this.steps.push([a,b])},c.draw=function(a){for(var b=this.x||0,c=this.y||0,d=this.width||0,e=this.height||0,f=a.createLinearGradient(b,c,d,e),g=this.steps.length,h=0;g>h;h++){var i=this.steps[h];f.addColorStop(i[0],i[1])}return f},cavy.LinearGradient=b}(window),function(a){"use strict";a.cavy=a.cavy||{};var b=function(a,b,c,d,e,f){this.x0=a||0,this.y0=b||0,this.x1=a||0,this.y1=b||0,this.r0=c||0,this.r1=f||0,this.steps=[]},c=b.prototype=Object.create(cavy.BackgroundColor.prototype);c.constructor=b,c.addStep=function(a,b){this.steps.push([a,b])},c.draw=function(a,b){for(var c=a.createRadialGradient(this.x0+b.width/2,this.y0+b.height/2,this.r0,this.x1+b.width/2,this.y1+b.height/2,this.r1),d=this.steps.length,e=0;d>e;e++){var f=this.steps[e];c.addColorStop(f[0],f[1])}return c},cavy.CircleGradient=b}(window),function(a){"use strict";a.cavy=a.cavy||{};var b=function(a,b,c){var d={width:a,height:b};cavy.Graphic.call(this,d,c)},c=b.prototype=Object.create(cavy.Graphic.prototype);c.constructor=b,c.draw=function(a,b){if(this.parent||b){var c=this.update(),d=this.matrix;this.updateContext(a),this.drawPath(a,c,d,b)}},cavy.Shape=b}(window),function(a){"use strict";a.cavy=a.cavy||{};var b=function(a,b,c){var d={width:a,height:b};cavy.Graphic.call(this,d,c)},c=b.prototype=Object.create(cavy.Graphic.prototype);c.constructor=b,c.draw=function(a,b){if(this.parent||b){var c=this.update(),d=this.matrix;b||this.updateContext(a),this.rect(0,0,c.innerWidth,c.innerHeight),this.drawPath(a,c,d,b),this.queue=[]}},cavy.Rectangle=b}(window),function(a){"use strict";a.cavy=a.cavy||{};var b=function(a,b,c,d,e){this.radius=a||100,this.startAngle=b||0,this.endAngle=c||360,this.anticlockwise=this.anticlockwise||!1;var f={width:2*a,height:2*a};cavy.Graphic.call(this,f,e)},c=b.prototype=Object.create(cavy.Graphic.prototype);c.constructor=b,c.draw=function(a,b){if(this.parent||b){var c=this.update(),d=this.matrix;b||this.updateContext(a),this.arc(c.sx+this.radius,c.sy+this.radius,this.radius,this.startAngle,this.endAngle,this.anticlockwise),this.drawPath(a,c,d,b),this.queue=[]}},cavy.Circle=b}(window),function(a){"use strict";a.cavy=a.cavy||{};var b=function(a,b){cavy.InteractiveObject.call(this,a,b)},c=b.prototype=Object.create(cavy.InteractiveObject.prototype);c.constructor=b,c.draw=function(a){if(this.parent){var b=this.update();this.updateContext(a),this.cache?this.imageCache&&"data:,"!==this.imageCache.src?a.drawImage(this.imageCache,0,0,b.width,b.height):a.drawImage(this.cache,0,0,b.width,b.height):this.source&&0!==this.source.width&&0!==this.source.height&&(b.sx+b.innerWidth>this.source.width&&(b.sx=this.source.width-b.innerWidth),b.sy+b.innerHeight>this.source.height&&(b.sy=this.source.height-b.innerHeight),a.drawImage(this.source,b.sx,b.sy,b.innerWidth,b.innerHeight,0,0,b.width,b.height))}},cavy.Sprite=b}(window),function(a){"use strict";a.cavy=a.cavy||{};var b=function(a,b,c){this.pattern=b||[],this.sheet=null,this.frame=0,this.count=0,this.interval=0,this.direction="horizontal",this.timer=null,this.line=0;var d=this;this._enterframeHandler=function(){d.enterframe()},cavy.Sprite.call(this,a,c)},c=b.prototype=Object.create(cavy.Sprite.prototype);c.constructor=b,c.play=function(){this.timer=cavy.Timer.repeat(this._enterframeHandler,this.interval)},c.stop=function(){cavy.Timer.stop(this.timer)},c.enterframe=function(){var a=this.pattern[this.sheet];if(a){var b=a[0],c=a[1],d=a[2],e=a[3];this.frame>d&&(e&&(++this.count,this.count===e&&(this.stop(),this.dispatchEvent("complete"))),this.line=0,this.frame=0);var f=0;if("horizontal"===this.direction){var g=Math.floor(this.source.width/this.width);f=0===this.line?this.frame:this.frame-this.line*g,f===g?(this.offsetX=0,this.line+=1):this.offsetX=f,this.offsetY=this.line+c}else{var h=Math.floor(this.source.height/this.height);f=0===this.line?this.frame:this.frame-this.line*h,f===h?(this.offsetY=0,this.line+=1):this.offsetY=f,this.offsetX=this.line+b}this.frame++}},cavy.SpriteSheet=b}(window),function(a){"use strict";a.cavy=a.cavy||{},cavy._textCache=document.createElement("canvas"),cavy._textContext=cavy._textCache.getContext("2d");var b=function(a,b){this._width=0,this._height=0,this._fontSize="14px",this._fontFamily="Arial",this._lineHeight="1.5",this._textBaseline="alphabetic",this._shadow=!1,this._shadowX=0,this._shadowY=0,this._shadowBlur=0,this._bold=!1,this._isClear=!1,this._textHeight=0,this._textList=[],this._text=String(a),this._textList=this._text.split("\n"),this.color="#000",this.textAlign="left",this.shadowColor="#333",this.outline=!1,this.autoResize=!0,cavy.InteractiveObject.call(this,null,b)},c=b.prototype=Object.create(cavy.InteractiveObject.prototype,{text:{get:function(){return this._text},set:function(a){this._text=String(a),this._textList=this._text.split("\n"),this.updateText(!0)}},fontSize:{get:function(){return this._fontSize},set:function(a){this._fontSize=a,this.updateText(!0)}},fontFamily:{get:function(){return this._fontFamily},set:function(a){this._fontFamily=a,this.updateText(!0)}},textBaseline:{get:function(){return this._textBaseline},set:function(a){this._textBaseline=a,this.updateText(!0)}},lineHeight:{get:function(){return this._lineHeight},set:function(a){this._lineHeight=a,this.updateText(!0)}},bold:{get:function(){return this._bold},set:function(a){this._bold=a,this.updateText(!0)}},width:{get:function(){return this._width},set:function(a){this._width=a,this.updateText(!0)}},height:{get:function(){return this._height},set:function(a){this._height=a,this.updateText(!0)}},shadow:{get:function(){return this._shadow},set:function(a){this._shadow=a,this.updateText(!0)}},shadowX:{get:function(){return this._shadowX},set:function(a){this._shadowX=a,this.updateText(!0)}},shadowY:{get:function(){return this._shadowY},set:function(a){this._shadowY=a,this.updateText(!0)}},shadowBlur:{get:function(){return this._shadowBlur},set:function(a){this._shadowBlur=a,this.updateText(!0)}}});c.constructor=b,c.updateText=function(a){if(this._textHeight=parseFloat(this._fontSize.replace(/[^0-9]/g,"")),this.autoResize){var b=cavy._textContext,c=this.width,d=this.height,e=this._textList.length;this.setStyle(b);for(var f=0;e>f;f++){var g=b.measureText(this._textList[f]).width;g>c&&(c=g)}var h=this._textHeight*this.lineHeight;h*e>d&&(d=h*e),this._width=c,this._height=d,this.source={width:c,height:d},a&&(this._isClear=!0)}},c.draw=function(a){this.text&&this.parent&&(this.cache&&!this._isClear?this._draw(a):this.drawText(a),this._isClear=!1)},c._draw=function(a){var b=this.update();this.updateContext(a),this.imageCache&&"data:,"!==this.imageCache.src?a.drawImage(this.imageCache,0,0,b.width,b.height):a.drawImage(this.cache,0,0,b.width,b.height)},c.drawText=function(a){this.update(),this.updateContext(a),this.setStyle(a);var b=0,c=this._textList.length,d=this._textHeight*this.lineHeight;switch(this.textAlign){case"center":b=this.width/2;break;case"right":b=this.width;break;case"left":}for(;c--;){var e=this._textList[c];this.outline?a.strokeText(e,b,this._textHeight+c*d):a.fillText(e,b,this._textHeight+c*d)}},c.setStyle=function(a){var b=this.bold?"bold":"";a.font=b+" "+this._fontSize+" '"+this._fontFamily+"'",a.textAlign=this.textAlign,a.textBaseline=this._textBaseline,this.shadow&&(a.shadowColor=this.shadowColor,a.shadowOffsetX=this._shadowX,a.shadowOffsetY=this._shadowY,a.shadowBlur=this._shadowBlur),this.outline?a.strokeStyle=this.color:a.fillStyle=this.color},cavy.Text=b,cavy.TextObject=b}(window);